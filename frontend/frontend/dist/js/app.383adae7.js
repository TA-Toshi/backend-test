(function(){"use strict";var e={3290:function(e,l,a){var t=a(5102),o=a(9269);function n(e,l,a,t,n,i){const r=(0,o.up)("q-tab"),s=(0,o.up)("q-tabs"),d=(0,o.up)("q-header"),u=(0,o.up)("MainPage"),c=(0,o.up)("q-tab-panel"),m=(0,o.up)("ServerPage"),p=(0,o.up)("VirtualServerPage"),b=(0,o.up)("q-tab-panels"),h=(0,o.up)("q-page-container"),w=(0,o.up)("q-layout");return(0,o.wg)(),(0,o.j4)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:n.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>n.tab=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{name:"manuals",label:"Справочники"}),(0,o.Wm)(r,{name:"server",label:"Сервера"}),(0,o.Wm)(r,{name:"virtual_server",label:"Виртуальные сервера"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:n.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>n.tab=e),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:"manuals"},{default:(0,o.w5)((()=>[(0,o.Wm)(u)])),_:1}),(0,o.Wm)(c,{name:"server"},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),(0,o.Wm)(c,{name:"virtual_server"},{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}function i(e,l,a,t,n,i){const r=(0,o.up)("q-tab"),s=(0,o.up)("q-tabs"),d=(0,o.up)("manual-page"),u=(0,o.up)("q-tab-panel"),c=(0,o.up)("q-tab-panels"),m=(0,o.up)("q-splitter"),p=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(p,{class:"row"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:n.splitterModel,"onUpdate:modelValue":l[2]||(l[2]=e=>n.splitterModel=e),style:{width:"100%",height:"100%"}},{before:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:n.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>n.tab=e),vertical:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{ripple:!1,name:"os",icon:"laptop",label:"Операционные системы"}),(0,o.Wm)(r,{ripple:!1,name:"memory",icon:"memory",label:"Память"}),(0,o.Wm)(r,{ripple:!1,name:"backup",icon:"content_copy",label:"Резервное копирование данных"}),(0,o.Wm)(r,{ripple:!1,name:"zabbix",icon:"support_agent",label:"Zabbix"}),(0,o.Wm)(r,{ripple:!1,name:"backupPhysical",icon:"file_copy",label:"Резервное копирование физической машины"}),(0,o.Wm)(r,{ripple:!1,name:"vm",icon:"pets",label:"Виртуальная машина"}),(0,o.Wm)(r,{ripple:!1,name:"disk_location",icon:"gps_not_fixed",label:"Нахождение диска"}),(0,o.Wm)(r,{ripple:!1,name:"backup_creation_mechanism",icon:"set_meal",label:"Механизм создания резервной копии"}),(0,o.Wm)(r,{ripple:!1,name:"location",icon:"place",label:"Нахождение"}),(0,o.Wm)(r,{ripple:!1,name:"album",icon:"album",label:"Диск"})])),_:1},8,["modelValue"])])),after:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:n.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>n.tab=e),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"os"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"\nОперационные\nсистемы",name:"os"})])),_:1}),(0,o.Wm)(u,{name:"memory"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Память",name:"memory_type"})])),_:1}),(0,o.Wm)(u,{name:"backup"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Резервное копирование данных",name:"backup"})])),_:1}),(0,o.Wm)(u,{name:"zabbix"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Zabbix",name:"zabbix_agent"})])),_:1}),(0,o.Wm)(u,{name:"backupPhysical"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Резервное копирование физической машины",name:"backup_physical_machine"})])),_:1}),(0,o.Wm)(u,{name:"vm"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Виртуальная машина",name:"vm_status"})])),_:1}),(0,o.Wm)(u,{name:"disk_location"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Нахождение диска",name:"disk_location"})])),_:1}),(0,o.Wm)(u,{name:"backup_creation_mechanism"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Механизм создания резервной копии",name:"backup_creation_mechanism"})])),_:1}),(0,o.Wm)(u,{name:"location"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Нахождение",name:"location"})])),_:1}),(0,o.Wm)(u,{name:"disk"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{title:"Диск",name:"disk"})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})}var r=a(3201);const s={class:"row justify-between col"},d={class:"q-table__title"},u={class:"text-h5 text-bold"};function c(e,l,a,t,n,i){const c=(0,o.up)("q-btn"),m=(0,o.up)("q-table"),p=(0,o.up)("q-card-section"),b=(0,o.up)("q-input"),h=(0,o.up)("q-card-actions"),w=(0,o.up)("q-card"),_=(0,o.up)("q-dialog"),C=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(m,{separator:"cell","row-key":"id",rows:n.rows,columns:n.columns,selection:"multiple",selected:n.selected,"onUpdate:selected":l[1]||(l[1]=e=>n.selected=e),onRowClick:l[2]||(l[2]=(e,l,a)=>{n.addRow=!1,n.dialog=!0,n.CurrentIndex=a,n.cloneCurrentRow=Object.assign({},this.rows[this.CurrentIndex])})},{top:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("div",d,(0,r.zw)(this.title),1),(0,o._)("div",null,[(0,o.Wm)(c,{class:"q-mr-md",label:"Добавить строку",color:"primary",onClick:l[0]||(l[0]=()=>{n.dialog=!0,n.addRow=!0})}),(0,o.Wm)(c,{label:"Удалить строку",color:"primary",onClick:i.deleteRows},null,8,["onClick"])])])])),_:1},8,["rows","columns","selected"]),(0,o.Wm)(_,{modelValue:n.dialog,"onUpdate:modelValue":l[5]||(l[5]=e=>n.dialog=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{style:{"min-width":"450px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,(0,r.zw)(n.addRow?"Добавление строки":"Изменение строки"),1)])),_:1}),(0,o.Wm)(p,{modelValue:n.cloneCurrentRow,"onUpdate:modelValue":l[4]||(l[4]=e=>n.cloneCurrentRow=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{filled:"",class:"q-mb-md",label:"Статус",modelValue:n.cloneCurrentRow.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.cloneCurrentRow.status=e)},null,8,["modelValue"])])),_:1},8,["modelValue"]),(0,o.Wm)(h,{class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(c,{flat:"",label:"Сохранить",onClick:i.saveRow},null,8,["onClick"]),[[C]]),(0,o.wy)((0,o.Wm)(c,{flat:"",label:"Отмена",onClick:i.cancelSave},null,8,["onClick"]),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}a(4719);var m=a(2965),p={name:"MainPage",props:{name:String,title:String},data(){return{columns:[{name:"id",align:"center",label:"Номер",field:"id",sortable:!0},{name:"status",align:"center",label:"Статус",field:"status",sortable:!0},{name:"createdAt",align:"center",label:"Дата создания",field:"createdAt",sortable:!0},{name:"updatedAt",align:"center",label:"Дата редактирования",field:"updatedAt",sortable:!0}],rows:[],selected:[],CurrentIndex:-1,cloneCurrentRow:{},dialog:!1,addRow:!1,model:null}},async created(){this.pullData()},methods:{pullData(){(0,m.Z)("http://localhost:7000/manuals/all_"+this.name).then((e=>this.rows=e.data))},saveRow(){this.addRow?(delete this.cloneCurrentRow.id,(0,m.Z)("http://localhost:7000/manuals/create_"+this.name,{method:"post",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}).then((()=>{console.log("Строка добавлена"),this.pullData()})),this.addRow=!1):(this.rows[this.CurrentIndex]=Object.assign({},this.cloneCurrentRow),delete this.cloneCurrentRow.id,(0,m.Z)("http://localhost:7000/manuals/"+this.name+"/"+this.rows[this.CurrentIndex].id,{method:"put",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}).then((()=>{console.log("Данные обновлены")}))),this.cloneCurrentRow={}},deleteRows(){if(0!=this.selected.length){const e=[];this.selected.forEach((l=>{e.push((0,m.Z)("http://localhost:7000/physical-servers/"+l.id,{method:"delete",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}))})),m.Z.all(e).then((()=>{this.pullData()}))}},cancelSave(){this.cloneCurrentRow={}}}},b=a(7617),h=a(7233),w=a(4686),_=a(1682),C=a(8055),R=a(9501),f=a(6931),g=a(4333),V=a(8819),v=a(1410),y=a.n(v);const k=(0,b.Z)(p,[["render",c]]);var W=k;y()(p,"components",{QTable:h.Z,QBtn:w.Z,QDialog:_.Z,QCard:C.Z,QCardSection:R.Z,QInput:f.Z,QCardActions:g.Z}),y()(p,"directives",{ClosePopup:V.Z});var Z={name:"MainPage",components:{ManualPage:W},data(){return{tab:"os",splitterModel:25}}},q=a(8906),x=a(8033),U=a(3554),Q=a(5748),P=a(4810),z=a(9082);const j=(0,b.Z)(Z,[["render",i]]);var S=j;y()(Z,"components",{QPage:q.Z,QSplitter:x.Z,QTabs:U.Z,QTab:Q.Z,QTabPanels:P.Z,QTabPanel:z.Z});const T={class:"q-pa-md col"},I={class:"row justify-between col"},E=(0,o._)("div",{class:"q-table__title"},"Сервера",-1),O={class:"text-h5 text-bold"};function M(e,l,a,t,n,i){const s=(0,o.up)("q-btn"),d=(0,o.up)("q-table"),u=(0,o.up)("q-card-section"),c=(0,o.up)("q-input"),m=(0,o.up)("q-select"),p=(0,o.up)("q-list"),b=(0,o.up)("q-card-actions"),h=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),_=(0,o.up)("q-page"),C=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(_,{class:"row"},{default:(0,o.w5)((()=>[(0,o._)("div",T,[(0,o.Wm)(d,{separator:"cell",title:"Сервера","row-key":"id",rows:n.rows,columns:n.columns,selection:"multiple",selected:n.selected,"onUpdate:selected":l[1]||(l[1]=e=>n.selected=e),onRowClick:l[2]||(l[2]=(e,l,a)=>{n.addRow=!1,n.dialog=!0,n.CurrentIndex=a,n.cloneCurrentRow=Object.assign({},this.rows[this.CurrentIndex])})},{top:(0,o.w5)((()=>[(0,o._)("div",I,[E,(0,o._)("div",null,[(0,o.Wm)(s,{class:"q-mr-md",label:"Добавить строку",color:"primary",onClick:l[0]||(l[0]=()=>{n.dialog=!0,n.addRow=!0})}),(0,o.Wm)(s,{label:"Удалить строку",color:"primary",onClick:i.deleteRows},null,8,["onClick"])])])])),_:1},8,["rows","columns","selected"]),(0,o.Wm)(w,{modelValue:n.dialog,"onUpdate:modelValue":l[20]||(l[20]=e=>n.dialog=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"col",style:{"max-width":"650px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",O,(0,r.zw)(n.addRow?"Добавление строки":"Изменение строки"),1)])),_:1}),(0,o.Wm)(u,{modelValue:n.cloneCurrentRow,"onUpdate:modelValue":l[19]||(l[19]=e=>n.cloneCurrentRow=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Название сервера",modelValue:n.cloneCurrentRow.server_name,"onUpdate:modelValue":l[3]||(l[3]=e=>n.cloneCurrentRow.server_name=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Нахождение",modelValue:n.cloneCurrentRow.appointment,"onUpdate:modelValue":l[4]||(l[4]=e=>n.cloneCurrentRow.appointment=e)},null,8,["modelValue"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.backup,"onUpdate:modelValue":l[5]||(l[5]=e=>n.cloneCurrentRow.backup=e),options:n.backup,label:"Бэкап"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.os,"onUpdate:modelValue":l[6]||(l[6]=e=>n.cloneCurrentRow.os=e),options:n.os,label:"Операционная система"},null,8,["modelValue","options"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Cpu",modelValue:n.cloneCurrentRow.cpu,"onUpdate:modelValue":l[7]||(l[7]=e=>n.cloneCurrentRow.cpu=e)},null,8,["modelValue"]),(0,o.Wm)(c,{type:"number",filled:"",class:"q-mb-md",label:"Ядер",modelValue:n.cloneCurrentRow.cores,"onUpdate:modelValue":l[8]||(l[8]=e=>n.cloneCurrentRow.cores=e)},null,8,["modelValue"]),(0,o.Wm)(c,{type:"number",filled:"",class:"q-mb-md",label:"Потоков",modelValue:n.cloneCurrentRow.streams,"onUpdate:modelValue":l[9]||(l[9]=e=>n.cloneCurrentRow.streams=e)},null,8,["modelValue"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.memory_type,"onUpdate:modelValue":l[10]||(l[10]=e=>n.cloneCurrentRow.memory_type=e),options:n.memory,label:"Тип памяти"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.zabbix_agent,"onUpdate:modelValue":l[11]||(l[11]=e=>n.cloneCurrentRow.zabbix_agent=e),options:n.zabbix,label:"Zabbix"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.location,"onUpdate:modelValue":l[12]||(l[12]=e=>n.cloneCurrentRow.location=e),options:n.location,label:"Нахождение"},null,8,["modelValue","options"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Ip",modelValue:n.cloneCurrentRow.ip,"onUpdate:modelValue":l[13]||(l[13]=e=>n.cloneCurrentRow.ip=e)},null,8,["modelValue"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.disk,"onUpdate:modelValue":l[14]||(l[14]=e=>n.cloneCurrentRow.disk=e),options:n.disk,label:"Диск"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.backup_physical_machine,"onUpdate:modelValue":l[15]||(l[15]=e=>n.cloneCurrentRow.backup_physical_machine=e),options:n.backupPhysical,label:"Резервное копирование физ"},null,8,["modelValue","options"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Vlan",modelValue:n.cloneCurrentRow.vlan,"onUpdate:modelValue":l[16]||(l[16]=e=>n.cloneCurrentRow.vlan=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Port",modelValue:n.cloneCurrentRow.port,"onUpdate:modelValue":l[17]||(l[17]=e=>n.cloneCurrentRow.port=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",label:"Комментарий",modelValue:n.cloneCurrentRow.comment,"onUpdate:modelValue":l[18]||(l[18]=e=>n.cloneCurrentRow.comment=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(b,{class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(s,{flat:"",label:"Сохранить",onClick:i.saveRow},null,8,["onClick"]),[[C]]),(0,o.wy)((0,o.Wm)(s,{flat:"",label:"Отмена",onClick:i.cancelSave},null,8,["onClick"]),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var A={name:"ServerPage",data(){return{columns:[{name:"server_name",align:"center",label:"Имя сервера",field:"server_name",sortable:!0},{name:"appointment",align:"center",label:"Назначение",field:"appointment",sortable:!0},{name:"backup",align:"center",label:"Резервное копирование данных",field:"backup",sortable:!0},{name:"os",align:"center",label:"Операционная система ",field:"os",sortable:!0},{name:"cpu",align:"center",label:"CPU",field:"cpu",sortable:!0},{name:"cores",align:"center",label:"Ядер",field:"cores",sortable:!0},{name:"streams",align:"center",label:"Потоков",field:"streams",sortable:!0},{name:"memory_type",align:"center",label:"Тип памяти ",field:"memory_type",sortable:!0},{name:"zabbix_agent",align:"center",label:"Zabbix Agent ",field:"zabbix_agent",sortable:!0},{name:"location",align:"center",label:"Нахождение",field:"location",sortable:!0},{name:"ip",align:"center",label:"IP",field:"ip",sortable:!0},{name:"disk",align:"center",label:"Диски",field:"disk",sortable:!0},{name:"backup_physical_machine",align:"center",label:"Резервное копирование физической машины ",field:"backup_physical_machine",sortable:!0},{name:"vlan",align:"center",label:"VLAN",field:"vlan",sortable:!0},{name:"port",align:"center",label:"PORT",field:"port",sortable:!0},{name:"comment",align:"center",label:"Комментарий",field:"comment",sortable:!0}],rows:[],selected:[],CurrentIndex:-1,cloneCurrentRow:{},dialog:!1,addRow:!1,model:null,backup:[],os:[],memory:[],zabbix:[],location:[],disk:[],backupPhysical:[],vm:[]}},async created(){this.pullServers(),this.pullManuals()},methods:{pullServers(){(0,m.Z)("http://localhost:7000/physical-servers").then((e=>{this.rows=e.data,this.rowsClone=e.data.map((e=>({...e}))),console.log(this.rows)}))},pullManuals(){m.Z.all([(0,m.Z)("http://localhost:7000/manuals/all_backup"),(0,m.Z)("http://localhost:7000/manuals/all_os"),(0,m.Z)("http://localhost:7000/manuals/all_memory_type"),(0,m.Z)("http://localhost:7000/manuals/all_zabbix_agent"),(0,m.Z)("http://localhost:7000/manuals/all_location"),(0,m.Z)("http://localhost:7000/manuals/all_disk"),(0,m.Z)("http://localhost:7000/manuals/all_backup_physical_machine"),(0,m.Z)("http://localhost:7000/manuals/all_vm_status")]).then((e=>{e[0].data.forEach((e=>{this.backup.push({id:e.id,label:e.status})})),e[1].data.forEach((e=>{this.os.push({id:e.id,label:e.status})})),e[2].data.forEach((e=>{this.memory.push({id:e.id,label:e.status})})),e[3].data.forEach((e=>{this.zabbix.push({id:e.id,label:e.status})})),e[4].data.forEach((e=>{this.location.push({id:e.id,label:e.status})})),e[5].data.forEach((e=>{this.disk.push({id:e.id,label:e.status})})),e[6].data.forEach((e=>{this.backupPhysical.push({id:e.id,label:e.status})})),e[7].data.forEach((e=>{this.vm.push({id:e.id,label:e.status})}))}))},saveRow(){this.cloneCurrentRow.backup_id=this.cloneCurrentRow.backup_id.id?this.cloneCurrentRow.backup_id.id:this.cloneCurrentRow.backup_id,this.cloneCurrentRow.os_id=this.cloneCurrentRow.os_id.id?this.cloneCurrentRow.os_id.id:this.cloneCurrentRow.os_id,this.cloneCurrentRow.memory_type_id=this.cloneCurrentRow.memory_type_id.id?this.cloneCurrentRow.memory_type_id.id:this.cloneCurrentRow.memory_type_id,this.cloneCurrentRow.zabbix_agent_id=this.cloneCurrentRow.zabbix_agent_id.id?this.cloneCurrentRow.zabbix_agent_id.id:this.cloneCurrentRow.zabbix_agent_id,this.cloneCurrentRow.location_id=this.cloneCurrentRow.location_id.id?this.cloneCurrentRow.location_id.id:this.cloneCurrentRow.location_id,this.cloneCurrentRow.disk_id=this.cloneCurrentRow.disk_id.id?this.cloneCurrentRow.disk_id.id:this.cloneCurrentRow.disk_id,this.cloneCurrentRow.backup_physical_machine_id=this.cloneCurrentRow.backup_physical_machine_id.id?this.cloneCurrentRow.backup_physical_machine_id.id:this.cloneCurrentRow.backup_physical_machine_id,this.addRow?(delete this.cloneCurrentRow.id,(0,m.Z)("http://localhost:7000/physical-servers",{method:"post",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}).then((()=>{console.log("Строка добавлена"),this.pullServers()})),this.addRow=!1):(this.rows[this.CurrentIndex]=Object.assign({},this.cloneCurrentRow),delete this.cloneCurrentRow.id,(0,m.Z)("http://localhost:7000/physical-servers/"+this.rows[this.CurrentIndex].id,{method:"put",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}).then((()=>{console.log("Данные обновлены")}))),this.cloneCurrentRow={}},deleteRows(){if(0!=this.selected.length){const e=[];this.selected.forEach((l=>{e.push((0,m.Z)("http://localhost:7000/physical-servers/"+l.id,{method:"delete",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}))})),m.Z.all(e).then((()=>{this.pullServers()}))}},cancelSave(){this.cloneCurrentRow={}}}},D=a(2146),L=a(6724);const B=(0,b.Z)(A,[["render",M]]);var H=B;y()(A,"components",{QPage:q.Z,QTable:h.Z,QBtn:w.Z,QDialog:_.Z,QCard:C.Z,QCardSection:R.Z,QList:D.Z,QInput:f.Z,QSelect:L.Z,QCardActions:g.Z}),y()(A,"directives",{ClosePopup:V.Z});const N={class:"q-pa-md col"},F={class:"row justify-between col"},Y=(0,o._)("div",{class:"q-table__title"},"Виртуальные сервера",-1),G={class:"text-h5 text-bold"};function J(e,l,a,t,n,i){const s=(0,o.up)("q-btn"),d=(0,o.up)("q-table"),u=(0,o.up)("q-card-section"),c=(0,o.up)("q-input"),m=(0,o.up)("q-select"),p=(0,o.up)("q-card-actions"),b=(0,o.up)("q-card"),h=(0,o.up)("q-dialog"),w=(0,o.up)("q-page"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(w,{class:"row"},{default:(0,o.w5)((()=>[(0,o._)("div",N,[(0,o.Wm)(d,{separator:"cell",title:"Виртуальные сервера","row-key":"id",rows:n.rows,columns:n.columns,selection:"multiple",selected:n.selected,"onUpdate:selected":l[1]||(l[1]=e=>n.selected=e),onRowClick:l[2]||(l[2]=(e,l,a)=>{n.addRow=!1,n.dialog=!0,n.CurrentIndex=a,n.cloneCurrentRow=Object.assign({},this.rows[this.CurrentIndex])})},{top:(0,o.w5)((()=>[(0,o._)("div",F,[Y,(0,o._)("div",null,[(0,o.Wm)(s,{class:"q-mr-md",label:"Добавить строку",color:"primary",onClick:l[0]||(l[0]=()=>{n.dialog=!0,n.addRow=!0})}),(0,o.Wm)(s,{label:"Удалить строку",color:"primary",onClick:i.deleteRows},null,8,["onClick"])])])])),_:1},8,["rows","columns","selected"]),(0,o.Wm)(h,{modelValue:n.dialog,"onUpdate:modelValue":l[18]||(l[18]=e=>n.dialog=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"col",style:{"max-width":"650px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",G,(0,r.zw)(n.addRow?"Добавление строки":"Изменение строки"),1)])),_:1}),(0,o.Wm)(u,{modelValue:n.cloneCurrentRow,"onUpdate:modelValue":l[17]||(l[17]=e=>n.cloneCurrentRow=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Клиент",modelValue:n.cloneCurrentRow.client,"onUpdate:modelValue":l[3]||(l[3]=e=>n.cloneCurrentRow.client=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Сервис",modelValue:n.cloneCurrentRow.service,"onUpdate:modelValue":l[4]||(l[4]=e=>n.cloneCurrentRow.service=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Окружение",modelValue:n.cloneCurrentRow.environment,"onUpdate:modelValue":l[5]||(l[5]=e=>n.cloneCurrentRow.environment=e)},null,8,["modelValue"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.backup_id,"onUpdate:modelValue":l[6]||(l[6]=e=>n.cloneCurrentRow.backup_id=e),options:n.backup,label:"Бэкап"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.os_id,"onUpdate:modelValue":l[7]||(l[7]=e=>n.cloneCurrentRow.os_id=e),options:n.os,label:"Операционная система"},null,8,["modelValue","options"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Cpu",modelValue:n.cloneCurrentRow.cpu,"onUpdate:modelValue":l[8]||(l[8]=e=>n.cloneCurrentRow.cpu=e)},null,8,["modelValue"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.zabbix_agent_id,"onUpdate:modelValue":l[9]||(l[9]=e=>n.cloneCurrentRow.zabbix_agent_id=e),options:n.zabbix,label:"Zabbix"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.location_id,"onUpdate:modelValue":l[10]||(l[10]=e=>n.cloneCurrentRow.location_id=e),options:n.location,label:"Нахождение"},null,8,["modelValue","options"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Ip",modelValue:n.cloneCurrentRow.ip,"onUpdate:modelValue":l[11]||(l[11]=e=>n.cloneCurrentRow.ip=e)},null,8,["modelValue"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.disk_id,"onUpdate:modelValue":l[12]||(l[12]=e=>n.cloneCurrentRow.disk_id=e),options:n.disk,label:"Диск"},null,8,["modelValue","options"]),(0,o.Wm)(m,{class:"q-mb-md",outlined:"",modelValue:n.cloneCurrentRow.backup_physical_machine_id,"onUpdate:modelValue":l[13]||(l[13]=e=>n.cloneCurrentRow.backup_physical_machine_id=e),options:n.backupPhysical,label:"Резервное копирование физ"},null,8,["modelValue","options"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Vlan",modelValue:n.cloneCurrentRow.vlan,"onUpdate:modelValue":l[14]||(l[14]=e=>n.cloneCurrentRow.vlan=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Port",modelValue:n.cloneCurrentRow.port,"onUpdate:modelValue":l[15]||(l[15]=e=>n.cloneCurrentRow.port=e)},null,8,["modelValue"]),(0,o.Wm)(c,{filled:"",class:"q-mb-md",label:"Комментарий",modelValue:n.cloneCurrentRow.comment,"onUpdate:modelValue":l[16]||(l[16]=e=>n.cloneCurrentRow.comment=e)},null,8,["modelValue"])])),_:1},8,["modelValue"]),(0,o.Wm)(p,{class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(s,{flat:"",label:"Сохранить",onClick:i.saveRow},null,8,["onClick"]),[[_]]),(0,o.wy)((0,o.Wm)(s,{flat:"",label:"Отмена",onClick:i.cancelSave},null,8,["onClick"]),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var K={name:"VirtualServerPage",data(){return{columns:[{name:"client",align:"center",label:"Клиент",field:"client",sortable:!0},{name:"service",align:"center",label:"Сервис",field:"service",sortable:!0},{name:"environment",align:"center",label:"Окружение",field:"environment",sortable:!0},{name:"vm_name",align:"center",label:"Название виртуальной машины",field:"vm_name",sortable:!0},{name:"backup",align:"center",label:"Резервное копирование виртуальной машины ",field:"backup",sortable:!0},{name:"vm_status",align:"center",label:"Состояние виртауальной машины",field:"vm_status",sortable:!0},{name:"os",align:"center",label:"Операционная система",field:"os",sortable:!0},{name:"machine_name",align:"center",label:"Название машины",field:"machine_name",sortable:!0},{name:"required_date_vm_shutdown",align:"center",label:"Требуемая дата отключения виртуальной машины",field:"required_date_vm_shutdown",sortable:!0},{name:"automatic_internal_domain_name",align:"center",label:"Автоматическое внутреннее доменное имя",field:"automatic_internal_domain_name",sortable:!0},{name:"additional_internal_domain_name",align:"center",label:"Дополнительное внутренее доменное имя",field:"additional_internal_domain_name",sortable:!0},{name:"domain_names",align:"center",label:"dДоменные имена",field:"domain_names",sortable:!0},{name:"cpu",align:"center",label:"CPU",field:"cpu",sortable:!0},{name:"mb",align:"center",label:"Память,мб",field:"mb",sortable:!0},{name:"ram",align:"center",label:"RAM",field:"ram",sortable:!0},{name:"disk_gb",align:"center",label:"Диск,гб",field:"disk_gb",sortable:!0},{name:"disk_location",align:"center",label:"Расположение диска",field:"disk_location",sortable:!0},{name:"zabbix_agent",align:"center",label:"Zabbix agent",field:"zabbix_agent",sortable:!0},{name:"location",align:"center",label:"Нахождение",field:"location",sortable:!0},{name:"ip",align:"center",label:"IP",field:"ip",sortable:!0},{name:"vlan",align:"center",label:"VLAN",field:"vlan",sortable:!0},{name:"backup_creation_mechanism",align:"center",label:"Механизм резервного копирования",field:"backup_creation_mechanism",sortable:!0},{name:"number_stored_copies_vm",align:"center",label:"Количество хранимых копий виртуальной машины",field:"number_stored_copies_vm",sortable:!0},{name:"maximum_storage_size_gb",align:"center",label:"Максимальный размер хранилища резервного копирования",field:"maximum_storage_size_gb",sortable:!0},{name:"comment",align:"center",label:"Комментарий",field:"comment",sortable:!0}],rows:[],selected:[],CurrentIndex:-1,cloneCurrentRow:{},dialog:!1,addRow:!1,model:null,backup:[],os:[],memory:[],zabbix:[],location:[],disk:[],backupPhysical:[]}},async created(){this.pullServers(),this.pullManuals()},methods:{pullServers(){(0,m.Z)("http://localhost:7000/virtual-servers").then((e=>{this.rows=e.data,this.rowsClone=e.data.map((e=>({...e}))),console.log(this.rows)}))},pullManuals(){m.Z.all([(0,m.Z)("http://localhost:7000/manuals/all_backup"),(0,m.Z)("http://localhost:7000/manuals/all_os"),(0,m.Z)("http://localhost:7000/manuals/all_memory_type"),(0,m.Z)("http://localhost:7000/manuals/all_zabbix_agent"),(0,m.Z)("http://localhost:7000/manuals/all_location"),(0,m.Z)("http://localhost:7000/manuals/all_disk"),(0,m.Z)("http://localhost:7000/manuals/all_backup_physical_machine")]).then((e=>{e[0].data.forEach((e=>{this.backup.push({id:e.id,label:e.status})})),e[1].data.forEach((e=>{this.os.push({id:e.id,label:e.status})})),e[2].data.forEach((e=>{this.memory.push({id:e.id,label:e.status})})),e[3].data.forEach((e=>{this.zabbix.push({id:e.id,label:e.status})})),e[4].data.forEach((e=>{this.location.push({id:e.id,label:e.status})})),e[5].data.forEach((e=>{this.disk.push({id:e.id,label:e.status})})),e[6].data.forEach((e=>{this.backupPhysical.push({id:e.id,label:e.status})}))}))},saveRow(){this.cloneCurrentRow.backup_id=this.cloneCurrentRow.backup_id.id?this.cloneCurrentRow.backup_id.id:this.cloneCurrentRow.backup_id,this.cloneCurrentRow.os_id=this.cloneCurrentRow.os_id.id?this.cloneCurrentRow.os_id.id:this.cloneCurrentRow.os_id,this.cloneCurrentRow.memory_type_id=this.cloneCurrentRow.memory_type_id.id?this.cloneCurrentRow.memory_type_id.id:this.cloneCurrentRow.memory_type_id,this.cloneCurrentRow.zabbix_agent_id=this.cloneCurrentRow.zabbix_agent_id.id?this.cloneCurrentRow.zabbix_agent_id.id:this.cloneCurrentRow.zabbix_agent_id,this.cloneCurrentRow.location_id=this.cloneCurrentRow.location_id.id?this.cloneCurrentRow.location_id.id:this.cloneCurrentRow.location_id,this.cloneCurrentRow.disk_id=this.cloneCurrentRow.disk_id.id?this.cloneCurrentRow.disk_id.id:this.cloneCurrentRow.disk_id,this.cloneCurrentRow.backup_physical_machine_id=this.cloneCurrentRow.backup_physical_machine_id.id?this.cloneCurrentRow.backup_physical_machine_id.id:this.cloneCurrentRow.backup_physical_machine_id,this.addRow?(delete this.cloneCurrentRow.id,(0,m.Z)("http://localhost:7000/physical-servers",{method:"post",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}).then((()=>{console.log("Строка добавлена"),this.pullServers()})),this.addRow=!1):(this.rows[this.CurrentIndex]=Object.assign({},this.cloneCurrentRow),delete this.cloneCurrentRow.id,(0,m.Z)("http://localhost:7000/physical-servers/"+this.rows[this.CurrentIndex].id,{method:"put",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}).then((()=>{console.log("Данные обновлены")}))),this.cloneCurrentRow={}},deleteRows(){if(0!=this.selected.length){const e=[];this.selected.forEach((l=>{e.push((0,m.Z)("http://localhost:7000/physical-servers/"+l.id,{method:"delete",headers:{"Content-Type":"application/json"},data:this.cloneCurrentRow}))})),m.Z.all(e).then((()=>{this.pullServers()}))}},cancelSave(){this.cloneCurrentRow={}}}};const X=(0,b.Z)(K,[["render",J]]);var $=X;y()(K,"components",{QPage:q.Z,QTable:h.Z,QBtn:w.Z,QDialog:_.Z,QCard:C.Z,QCardSection:R.Z,QInput:f.Z,QSelect:L.Z,QCardActions:g.Z}),y()(K,"directives",{ClosePopup:V.Z});var ee={name:"LayoutDefault",components:{MainPage:S,ServerPage:H,VirtualServerPage:$},data(){return{tab:"manuals"}}},le=a(2446),ae=a(7454),te=a(6974);const oe=(0,b.Z)(ee,[["render",n]]);var ne=oe;y()(ee,"components",{QLayout:le.Z,QHeader:ae.Z,QTabs:U.Z,QTab:Q.Z,QPageContainer:te.Z,QTabPanels:P.Z,QTabPanel:z.Z});var ie=a(751),re={config:{},plugins:{}};ie.Z.lang.set(ie.Z.lang.eng),(0,t.ri)(ne).use(ie.Z,re).mount("#app")}},l={};function a(t){var o=l[t];if(void 0!==o)return o.exports;var n=l[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(l,t,o,n){if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],o=e[u][1],n=e[u][2];for(var r=!0,s=0;s<t.length;s++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](t[s])}))?t.splice(s--,1):(r=!1,n<i&&(i=n));if(r){e.splice(u--,1);var d=o();void 0!==d&&(l=d)}}return l}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[t,o,n]}}(),function(){a.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(l,{a:l}),l}}(),function(){a.d=function(e,l){for(var t in l)a.o(l,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={143:0};a.O.j=function(l){return 0===e[l]};var l=function(l,t){var o,n,i=t[0],r=t[1],s=t[2],d=0;if(i.some((function(l){return 0!==e[l]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(s)var u=s(a)}for(l&&l(t);d<i.length;d++)n=i[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))}();var t=a.O(void 0,[998],(function(){return a(3290)}));t=a.O(t)})();
//# sourceMappingURL=app.383adae7.js.map